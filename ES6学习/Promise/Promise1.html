<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="img"></div>
<script src="../../js/jquery-1.9.1.min.js"></script>
<script>
    //    function loadImage(url){
    //        return new Promise((resolve,reject)=>{
    //            let img = new Image();
    //            img.onload = ()=>{
    //                resolve(img);
    //            }
    //            img.onerror = ()=>{
    //                reject(new Error('404'));
    //            }
    //            img.src = url;
    //        })
    //    }
    //    loadImage('../../images/afei.jpg').then(data=>{
    //        console.log(data);
    //        document.querySelector('.img').appendChild(data);
    //    },err=>{
    //        console.log(err);
    //    });


    //    let p1 = new Promise((resolve,reject)=>{
    ////        throw new Error('fuck');
    //        setTimeout(()=>{
    //            resolve('ok');
    //        },3000)
    //    })
    //    let p2 = new Promise((resolve,reject)=>{
    //        //console.log(p1);
    //        //过3秒解析了p1
    //        resolve(p1);
    //    })
    //    p2.then(data=>{
    //        //3秒后输出ok
    //        console.log(data);
    //    }).catch(e=>{
    //        console.log(e);
    //    })


    //reject了用catch接收
    //    function p(){
    //        return new Promise((resolve,reject)=>{
    //            reject('no');
    //        })
    //    }
    //    p().catch(e=>{
    //        console.log(e);
    //    })


    //使用Promise.all 参数用的是（返回promise的数组）
//    function getJson(urlChuck){
//        return new Promise((resolve,reject)=>{
//            $.ajax({
//                method:'get',
//                url:'../../json/'+urlChuck+'.json',
//                success(data){
//                    resolve(data);
//                },
//                error(){
//                    reject('no');
//                }
//            })
//        })
//        //如果有自己的catch那么捕获的是自己的catch
//        /*.catch(e=>{
//            console.log(e,'11111111111');
//        })*/
//    }
//    function p(){
//        let promises = ['a1','a5','a3'].map((item)=>{
//            return getJson(item);
//        })
//        //console.log(promises);
//        //[promise,promise,promise]
//        //数组解构
//        Promise.all(promises).then(([a1,a2,a3])=>{
//            console.log(a1);
//            console.log(a2);
//            console.log(a3);
//        }).catch(function(e){
//            console.log(e);
//        })
//    }
//    p();



    //谁解析的快谁就率先返回
//    let promises = [
//        new Promise((resolve,reject)=>{
//            setTimeout(()=>{
//                resolve(3000);
//            },3000)
//        }),
//        new Promise((resolve,reject)=>{
//            setTimeout(()=>{
//                resolve(1000);
//            },1000)
//        })
//    ]
//    Promise.race(promises).then(datas=>{
//        console.log(datas);
//    })


    //直接将jq的ajax转化为promise
    var http = $.ajax({
                    method:'get',
                    url:'../../json/a1.json'
                })

    var p = Promise.resolve(http);
    p.then((data)=>{
        console.log(data);
    })

</script>
</body>
</html>