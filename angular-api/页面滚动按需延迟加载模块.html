<!DOCTYPE html>
<html ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        @keyframes uptodown {
            from {
                transform: translateY(-100px)
            }
            to {
                transform: translateY(0px)
            }
        }

        @keyframes downtoup {
            from {
                transform: translateY(100px)
            }
            to {
                transform: translateY(0px)
            }
        }

        .uptodown {
            animation: uptodown 1.5s;
        }

        .downtoup {
            animation: downtoup 1.5s;
        }

        .box {
            height: 1px;
            width: 1000px;
            margin: 200px auto;
        }

        .box2 {
            height: 1px;
            width: 1000px;
            margin: 800px auto 0;
        }

        .box2 .item {
            background: #ffc0cb;
        }

        .box3 {
            height: 1px;
            width: 1000px;
            margin: 800px auto 0;
        }

        .box3 .item {
            background: #008000;
        }

        .box4 {
            height: 1px;
            width: 1000px;
            margin: 800px auto 0;
        }

        .box4 .item {
            background: #0000ff;
        }

        .box5 {
            height: 1px;
            width: 1000px;
            margin: 800px auto 400px;
        }

        .box5 .item {
            background: #000;
        }

        .item {
            width: 200px;
            height: 200px;
            background: cornflowerblue;
            float: left;
            margin-left: 20px;
        }
    </style>
</head>
<body ng-controller="con" style="height:10000px">
<div class="box">
    <div class="main">
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
    </div>
    <div style="clear: both"></div>
</div>
<div class="box2">
    <div class="main" load>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div style="clear: both"></div>
    </div>
</div>
<div class="box3">
    <div class="main" load>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div style="clear: both"></div>
    </div>
</div>

<div class="box4">
    <div class="main" load>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div style="clear: both"></div>
    </div>
</div>

<div class="box5">
    <div class="main" load>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div class="uptodown item"></div>
        <div class="downtoup item"></div>
        <div style="clear: both"></div>
    </div>
</div>


<script type="text/javascript" src="../js/angular2.min.js"></script>
<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
<script>
    var app = angular.module('app', []);
    app.controller('con', function ($scope) {

    });
    app.directive('load', function ($animate) {
        return {
            replace: true,
            transclude: 'element',
            link: function ($scope, ele, attr, ngModel, $transclude) {


                var parent = $(ele).parent(),
                        offsetTop = parent[0].offsetTop,
                        mark = false;


                $(window).scroll(function () {
                    if (!mark) {
                        doSomeThing();
                    }

                });


                function doSomeThing() {
                    if ($(window).scrollTop()+$(window).innerHeight() >= offsetTop) {
                        console.log(1);
                        $transclude(function (clone, scope) {
                            //console.log(clone[0]);
                            //parent.append(clone);
                            $animate.enter(clone,parent,ele);
                        });
                        mark = true;
                    }
                }

            }
        }
    });
</script>
</body>
</html>